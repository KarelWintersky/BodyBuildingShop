<h1><a href="/adm/news/">Новости</a> / <?= ($this->registry['action']==300) ? '«'.$this->registry['newsitem']['name'].'»' : 'Добавить новость'?></h1>

<div class="form_1">

	<form class="usual_form" id="form_NewsInfo" action="/doer/" method="POST" onsubmit="return news_form_check(this);">

		<input type="hidden" name="d_action" value="<?=$this->registry['action']?>">
		<input type="hidden" name="id" value="<?= ($this->registry['action']==300) ? $this->registry['newsitem']['id'] : 0;?>">
		<input type="hidden" name="rp" value="<?=$_SERVER['REQUEST_URI'];?>">

		<div class="form_l form_l_name lft">
			<label>Название</label>
			<input type="text" name="name" value="<?= ($this->registry['action']==300) ? htmlspecialchars($this->registry['newsitem']['name']) : '';?>">
			<div class="errF"></div>
		</div>

		<div class="form_l form_l_alias lft">
			<label>Alias</label>
			<input type="text" name="alias" value="<?= ($this->registry['action']==300) ? $this->registry['newsitem']['alias'] : '';?>">
		</div>

		<div class="form_l form_l_date lft">
			<label>Дата</label>
			<input class="datepicker" type="text" name="date" value="<?= ($this->registry['action']==300) ? date('d.m.Y',strtotime($this->registry['newsitem']['date'])) : date('d.m.Y',time());?>" readonly>
		</div>

		<div class="clr"></div>

		<div class="form_l form_l_content">
			<label>Текст новости</label>
			<textarea class="tinyMCE" name="content"><?= ($this->registry['action']==300) ? $this->registry['newsitem']['content'] : '';?></textarea>
		</div>

		<div class="form_l form_l_published lft cbox">
			<input type="checkbox" name="published" id="published" value="1" <?=($this->registry['action']==300 && $this->registry['newsitem']['published']==1) ? 'checked' : '';?>>
			<label for="published">Опубликована</label>
			<div class="clr"></div>
		</div>

		<div class="form_l form_l_rss lft cbox">
			<input type="checkbox" name="rss" id="rss" value="1" <?=($this->registry['action']==300 && $this->registry['newsitem']['rss']==1) ? 'checked' : '';?>>
			<label for="rss">Участвует в RSS</label>
			<div class="clr"></div>
		</div>

		<div class="clr"></div>

		<div class="form_l sbm">
			<input type="submit" value="<?= ($this->registry['action']==300) ? 'Сохранить' : 'Добавить';?>">
		</div>

		<div id="overall_err_msg">Возникли ошибки. Заполните корректно указанные поля и сохраните форму еще раз.</div>

		<div class="clr"></div>

	</form>

	<?if($this->registry['action']==300 && $this->registry['userdata']['type']==2):?>

		<form id="delForm" action="/doer/" method="POST">

			<input type="hidden" name="d_action" value="302">
			<input type="hidden" name="id" value="<?=$this->registry['newsitem']['id']?>">
			<input type="hidden" name="rp" value="/adm/news/">

			<div class="delLink">

				<div class="del_confirm">
					<div class="del_confirm_head">Удаление новости</div>
					<div class="del_confirm_i">
						<span>Вы действительно хотите удалить новость?</span>
						<ul class="del_confirm_lnk">
							<li class="y"><a onclick="return form_sbm('#delForm');" href="#">Да</a></li>
							<li class="n"><a onclick="return delConfirmHide(this);" href="#">Нет</a></li>
						</ul>
						<div class="clr"></div>
					</div>
				</div>

				<a href="#" onclick="return delConfirm(this);">Удалить новость</a>
			</div>

		</form>

		<div class="clr"></div>

	<?endif;?>

</div>